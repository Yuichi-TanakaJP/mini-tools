# yutai-expiry backlog (UI / data model)

## 目的（将来像）

株主優待の「今年お得した分」「未使用残」などを集計・表示できる状態に近づける。
その前提として、複数券種（額面 × 枚数）と使用状況をより細かく管理できるようにする。

## 背景

単一の quantity/amount だけだと、複数券種・一部使用などの管理が難しい。
→ bundles（複数券種）を導入したいが、UI/データ構造への影響が大きいため段階的に進める。

## TODO（PR 単位の候補）

### PR1: 日付入力の自由形式 → ISO 正規化

- 手入力は自由形式を許容（例: 2026/3/31, 20260331, 3/31 など）
- onBlur で `YYYY-MM-DD` に正規化（失敗時は validate でエラー）
- 仕様：期限なし（空）は OK。今月/先の期限タブには表示しない（ノイズ防止）

### PR2: 📅 ボタン（date picker）

- 📅 ボタンで日付選択
- `showPicker()` が使えない環境のフォールバックも用意
- テキスト入力 + hidden date input の構成

### PR3: bundles（複数券種入力）

- 追加モードで複数券種（amountYen×quantity）を複数行入力
- 編集モードの扱い（単一/複数の整合）を整理して実装
- バリデーション（片方だけ入力 NG、0 の扱い、空行の扱いなど）を明文化

### PR4: 企業名必須の扱い（検討）

- bundles を「企業単位でまとめる」前提なら企業名必須が自然
- 一方で入力負担は上がるので、必須にするかは PR で決める（暫定では必須化しない案も検討）
